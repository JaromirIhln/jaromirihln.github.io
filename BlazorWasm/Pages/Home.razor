@page "/"
@inject HttpClient Http
@using System.Net.Http.Json

<PageTitle>Home</PageTitle>

<h1 class="text-center text-bg-info" tabindex="0">Vítejte ve webové aplikaci Blazor!</h1>
<h3 class="markdown text-center" tabindex="1">Webová aplikace,a která hostuje a je nasazena na 'GitHub pages' pomocí
    GitHub Action,</h3>
<h6 class="markdown text-center" tabindex="2">a načítá razor komponenty včetně C# kódů z repozitáře GitHub.</h6>
<!--Hero imege an sample of W3S-->
<div id="h-image" class="hero-image h-25" tabindex="3">
    <img src="/images/wide_home.webp" class="hero-image opacity-0" tabindex="4" />
    <div id="h-text" class="hero-text">
        <h2 class="font-change">Vývoj v ASP.NET Core <span class="fa fa-film"> </span> </h2>
        <p>Architektura pro vývoj multiplatformních aplikací a rozhraní API, MVC &#40;Model-View-Controller&#41; a
            moderních cloudových aplikací.</p>
        <button id="hero-btn" class="fw-semibold border border-1 border-info" tabindex="5">
            <a href="https://learn.microsoft.com/cs-cz/aspnet/core/introduction-to-aspnet-core?view=aspnetcore-9.0"
                class="a-in-btn fa fa-windows" target="_blank"> Zjistit více...?</a>
        </button>
    </div>
</div>
    <!--Contact form as hiden modal-->
    <div id="contact-form" class="modal">
        <form class="modal-content animate text-white" method="post" action="mailto:">
            <span onclick="document.getElementById('contact-form').style.display='none'" class="close"
                title="Close Modal">&times;</span>
            <div class="container">
                <label for="uname"><span class="fa fa-user-secret"> </span> Jméno: </label>
                <input type="text" id="uname" name="name" placeholder="Tvoje jméno..">

                <label for="email"><span class="fa fa-envelope-o"> </span> Email:</label>
                <input type="text" id="email" name="email" placeholder="Tvůj email..">

                <label for="subject"><span class="fa fa-question-circle-o"> </span> Předmět</label>
                <input id="subject" name="country" type="text" placeholder="Předmět zprávy..">


                <label for="content"><span class="fa fa-commenting-o"> </span> Zpráva:</label>
                <textarea id="content" name="content" placeholder="Tvoje zpráva.." style="height:200px"></textarea>
            </div>
            <div class="container">
                <button type="button" onclick="document.getElementById('contact-form').style.display='none'"
                    class="btn btn-danger text-white p-2 rounded-1 me-3"><span class="fa fa-remove"> </span>
                    Zrušit</button>
                <a href="mailto:xerox03@seznam.cz" type="submit"
                    class="btn btn-success text-white p-2 rounded-1">Odeslat <span class="fa fa-send-o"> </span></a>
            </div>
        </form>
    </div>
    <!-- Ještě přidám lightbox galerii - vzhledem modularitě Blazor komponent-->
    <!-- umístím galerii tam kde se nachází odkaz - nechci si to dělat složité-->
    <!-- je to hidden element, tak by to nemělo ničemu vadit-->
       <!--Hiden gallery -->
   <div id="myModal" class="modal">
    <span class="close-btn cursor" onclick="closeModal()">&times;</span>
    <div class="modal-content">

        <div class="mySlides">
            <div class="number-text">1 / 8</div>
            <img src="/images/wide_home.webp" style="width: 100%;">
        </div>
        <div class="mySlides">
            <div class="number-text">2 / 8</div>
            <img src="/images/owner_land.webp" style="width:100%">
        </div>
          <div class="mySlides">
            <div class="number-text">3 / 8</div>
            <img src="/images/i_without_w_0.webp" style="width:100%">
        </div>

        <div class="mySlides">
            <div class="number-text">4 / 8</div>
            <img src="/images/best-wallpapers-7.webp" style="width:100%">
        </div>
        <div class="mySlides">
            <div class="number-text">5 / 8</div>
            <img src="/images/lucky_jump_w.webp" style="width:100%">
        </div>

        <div class="mySlides">
            <div class="number-text">6 / 8</div>
            <img src="/images/pyramid_camel_w.webp" style="width:100%">
        </div>
         <div class="mySlides">
            <div class="number-text">7 / 8</div>
            <img src="/images/wide_e.webp" style="width:100%">
        </div>
        <div class="mySlides">
            <div class="number-text">8 / 8</div>
            <img src="/images/a_kvalita.webp" style="width:100%">
        </div>

        <!-- Next/previous buttons controls -->
        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
        <a class="next" onclick="plusSlides(1)">&#10095;</a>

        <!-- Caption text -->
        <div class="caption-container">
            <p id="caption"></p>
        </div>
        <!-- Thumbnail imeges -->
        <div class="row">
            <div class="col-3 mt-1">
                <img class="gallery img-thumbnail" src="/images/wide_home.webp" onclick="currentSlide(1)"
                    alt="Jaromír Ihln - osobně">
            </div>

            <div class="col-3 mt-1">
                <img class="gallery img-thumbnail" src="/images/owner_land.webp" onclick="currentSlide(2)"
                    alt="Já doma">
            </div>
             <div class="col-3 mt-1">
                <img class="gallery img-thumbnail" src="/images/i_without_w_0.webp" onclick="currentSlide(3)"
                    alt="Praha ITnetwork">
            </div>

            <div class="col-3 mt-1">
                <img class="gallery img-thumbnail" src="/images/best-wallpapers-7.webp" onclick="currentSlide(4)"
                    alt="Opět kdesi v Teplicích">
            </div>
            <div class="col-3 mt-1">
                <img class="gallery img-thumbnail" src="/images/lucky_jump_w.webp" onclick="currentSlide(5)"
                    alt="lucky jump">
            </div>

            <div class="col-3 mt-1">
                <img class="gallery img-thumbnail" src="/images/pyramid_camel_w.webp" onclick="currentSlide(6)"
                    alt="Camel pyramid">
            </div>

            <div class="col-3 mt-1">
                <img class="gallery img-thumbnail" src="/images/wide_e.webp" onclick="currentSlide(7)"
                    alt="Kdesi v Teplicích">
            </div>
            <div class="col-3 mt-1">
                <img class="gallery img-thumbnail" src="/images/a_kvalita.webp" onclick="currentSlide(8)"
                    alt="Duchcov v noci">
            </div>
        </div>
    </div>
</div>
<script src="/js/gallery.js"></script>
<script src="/js/modal.js"></script>
   <script>
        // Inicializace modalu
        var modal = document.getElementById('contact-form');
        //Když uživatel klikne kamkoli mimo modal, opět jej skryje
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

    </script>

@if (!string.IsNullOrEmpty(errorMessage))
{
    <div class="alert alert-danger">@errorMessage</div>
}
else if (posts == null)
{
    <p>Načítám data...</p>
}
else
{
    <div class="row">
        @foreach (var post in posts)
        {
            <div class="col-md-4 mb-3" tabindex="@posts.IndexOf(post)">
                <h2 class="title-0 p-md-1 text-center text-bg-dark">@post.Title</h2>
                <p class="post-0 p-md-1 text-center text-bg-light">@((MarkupString)(post?.Content ?? ""))</p>
            </div>
        }
    </div>
}


<div class="footer" tabindex="9">
    <p class="p-2">
        © 2025 Copyright <span class="fa fa-refresh"> </span>
        <a class="text-reset fw-bold" href="https://github.com/JaromirIhln"> Jaromir Ihln - Github</a>
    </p>
    <p class="fa fa-windows" tabindex="11"> Ukázka použití ASP.NET Core Blazor WebAssembly.</p>
</div>
@code {
    protected override void OnInitialized()
    {
        base.OnInitialized();
        // Initialize any data or services needed for the component
    }
    private List<Post>? posts;
    private string? errorMessage;
    protected override async Task OnInitializedAsync()
    {
        try
        {
            var data = await Http.GetFromJsonAsync<PostsRoot>("json/posts.json");
            posts = data?.Posts;
        }
        catch
        {
            errorMessage = "Nepodařilo se načíst data.";
        }
    }
    public class Post
    {
        public string? Title { get; set; }
        public string? Content { get; set; }
    }

    public class PostsRoot
    {
        public List<Post>? Posts { get; set; }
    }
}